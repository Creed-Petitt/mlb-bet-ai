<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MLB Hit Props</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4">
  <header class="mb-6">
    <h1 class="text-3xl font-bold mb-2">MLB Hit Prop Predictions</h1>
    <label class="inline-flex items-center">
      <input type="checkbox" id="filterToggle" class="mr-2">
      Show only edges > 5%
    </label>
  </header>

  <div id="propsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {% for row in predictions %}
    <div class="rounded-xl shadow-lg p-4 transition transform hover:scale-105
                {% if row.edge >= 10 %}border-2 border-yellow-400 bg-gray-800{% elif row.edge >= 5 %}border border-green-500 bg-gray-800{% else %}bg-gray-800 border border-gray-700{% endif %}">
      <div class="flex justify-between items-center mb-2">
        <h2 class="text-xl font-semibold">{{ row.player_name }}</h2>
        <span class="text-sm px-2 py-1 rounded-md font-bold
          {% if row.over_under == 'OVER' %}bg-green-600 text-white{% else %}bg-red-600 text-white{% endif %}">
          {{ row.over_under }}
        </span>
      </div>
      <div class="text-sm text-gray-300">
        <p><strong>Model Probability:</strong> {{ row.prediction }}%</p>
        <p><strong>Implied Probability:</strong> {{ row.implied_prob }}%</p>
        <p><strong>Edge:</strong> <span class="font-semibold">{{ row.edge }}%</span></p>
      </div>
    </div>
    {% endfor %}
  </div>

  <script>
    const toggle = document.getElementById("filterToggle");
    toggle.addEventListener("change", () => {
      const cards = document.querySelectorAll("#propsGrid > div");
      cards.forEach(card => {
        const edgeText = card.querySelector("p span").innerText.replace('%','');
        const edge = parseFloat(edgeText);
        const show = toggle.checked ? edge >= 5 : true;
        card.style.display = show ? "block" : "none";
      });
    });
  </script>
</body>
</html>
